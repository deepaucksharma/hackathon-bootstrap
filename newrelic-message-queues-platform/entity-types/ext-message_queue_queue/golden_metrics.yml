queueDepth:
  title: Queue Depth
  unit: COUNT
  queries:
    - select: latest(queue.messages.ready)
      from: MessageQueue
      where: "entity.type = 'MESSAGE_QUEUE_QUEUE'"
      facet: entity.name
      eventId: entity.guid

messagesPublishedRate:
  title: Messages Published Rate
  unit: COUNT_PER_MINUTE
  queries:
    - select: rate(sum(queue.messages.published), 1 minute)
      from: MessageQueue
      where: "entity.type = 'MESSAGE_QUEUE_QUEUE'"
      facet: entity.name
      eventId: entity.guid

messagesDeliveredRate:
  title: Messages Delivered Rate
  unit: COUNT_PER_MINUTE
  queries:
    - select: rate(sum(queue.messages.delivered), 1 minute)
      from: MessageQueue
      where: "entity.type = 'MESSAGE_QUEUE_QUEUE'"
      facet: entity.name
      eventId: entity.guid

unacknowledgedMessages:
  title: Unacknowledged Messages
  unit: COUNT
  queries:
    - select: latest(queue.messages.unacknowledged)
      from: MessageQueue
      where: "entity.type = 'MESSAGE_QUEUE_QUEUE'"
      facet: entity.name
      eventId: entity.guid

consumerCount:
  title: Active Consumers
  unit: COUNT
  queries:
    - select: latest(queue.consumers)
      from: MessageQueue
      where: "entity.type = 'MESSAGE_QUEUE_QUEUE'"
      facet: entity.name
      eventId: entity.guid

averageMessageAge:
  title: Average Message Age
  unit: SECONDS
  queries:
    - select: average(queue.message.age)
      from: MessageQueue
      where: "entity.type = 'MESSAGE_QUEUE_QUEUE'"
      facet: entity.name
      eventId: entity.guid

memoryUsage:
  title: Memory Usage
  unit: BYTES
  queries:
    - select: latest(queue.memory.usage)
      from: MessageQueue
      where: "entity.type = 'MESSAGE_QUEUE_QUEUE'"
      facet: entity.name
      eventId: entity.guid
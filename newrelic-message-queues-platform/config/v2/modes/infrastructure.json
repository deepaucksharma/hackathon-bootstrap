{
  "discovery": {
    "providers": ["kubernetes", "docker"],
    "interval": 60000,
    "timeout": 30000,
    "cache": {
      "enabled": true,
      "ttl": 300000
    },
    "kubernetes": {
      "namespaces": ["default", "kafka", "rabbitmq"],
      "labelSelectors": {
        "kafka": "app.kubernetes.io/name=kafka",
        "rabbitmq": "app=rabbitmq"
      },
      "annotationPrefix": "newrelic.com/messagequeue"
    },
    "docker": {
      "labelFilters": {
        "kafka": "com.docker.compose.service=kafka",
        "rabbitmq": "com.docker.compose.service=rabbitmq"
      },
      "networks": ["bridge", "host"]
    }
  },
  "shim": {
    "providers": ["kafka", "rabbitmq"],
    "validation": {
      "strict": true,
      "schemas": true
    },
    "mapping": {
      "autoDetect": true,
      "customMappings": {
        "kafka": {
          "metrics": {
            "bytesIn": "kafka.broker.bytes.in",
            "bytesOut": "kafka.broker.bytes.out",
            "messagesIn": "kafka.broker.messages.in"
          }
        },
        "rabbitmq": {
          "metrics": {
            "publishRate": "rabbitmq.queue.messages.publish.rate",
            "deliverRate": "rabbitmq.queue.messages.deliver.rate"
          }
        }
      }
    }
  },
  "tracking": {
    "changes": true,
    "history": {
      "enabled": true,
      "retention": 86400000
    },
    "events": {
      "emit": true,
      "types": ["created", "updated", "deleted", "scaled"]
    }
  }
}
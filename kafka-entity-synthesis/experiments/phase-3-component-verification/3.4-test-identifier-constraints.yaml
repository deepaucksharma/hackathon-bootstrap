name: "Phase 3 / Test 3.4: Test Identifier Length Constraints"
description: "Verify 1-50 character constraint on entity identifiers"
baseTemplate: "reference/working-account-samples/broker-events.json"

modifications:
  # Test with very long cluster name (>50 chars)
  - action: "set"
    path: "entityName"
    value: "1:this-is-a-very-long-cluster-name-that-exceeds-fifty-characters-limit-${timestamp}"
  - action: "set"
    path: "provider.clusterName"
    value: "this-is-a-very-long-cluster-name-that-exceeds-fifty-characters-limit-${timestamp}"
  - action: "set"
    path: "_experimentId"
    value: "${experimentId}"
  - action: "set"
    path: "timestamp"
    value: "${timestamp}"

verification:
  timeout: 300
  initialDelay: 30
  checks:
    - type: "entityExists"
      details: 
        entityName: "1:this-is-a-very-long-cluster-name-that-exceeds-fifty-characters-limit-${timestamp}"
        entityType: "AWS_KAFKA_BROKER"
    
    - type: "identifierValidation"
      details:
        expectFailure: true
        reason: "Identifier exceeds 50 character limit"
        maxLength: 50

expectedOutcome: "entityExists_FAIL"
keyInsight: "Entity identifiers must be 1-50 characters of printable ASCII"
notes: "If entity is created despite long name, check if encodeIdentifierInGUID is enabled"